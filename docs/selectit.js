(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>n});const s=["left","right"];class i{constructor(t){this.el=t,this.setElements()}setElements(){this.elements={list:{left:this.select(".selectit-left .selectit-list"),right:this.select(".selectit-right .selectit-list")},counter:{left:this.select(".selectit-left .selectit-count"),right:this.select(".selectit-right .selectit-count")},close:{left:this.select(".selectit-left .close"),right:this.select(".selectit-right .close")},input:{left:this.select(".selectit-left .selectit-search input"),right:this.select(".selectit-right .selectit-search input")},container:this.select("div"),select:this.select("span.selectit-selectall"),deselect:this.select("span.selectit-deselect"),input:{left:this.select(".selectit-left .selectit-search input"),right:this.select(".selectit-right .selectit-search input")},hidden:this.select(".selectit-input")}}select(t){return this.el.querySelector(`${t}`)}}class l{constructor(){this.events={}}on(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}emit(t,e){if(!this.events[t])throw new Error(`Can't emit an event. Event "${t}" doesn't exits.`);this.events[t].forEach((t=>{t(e)}))}}const n=class extends l{constructor(t,e){super(),this.on("selected",(()=>{}));this.el=t,this.config=Object.assign({},{height:250,labelField:"label",valueField:"value",selected:void 0,name:"selectit-input",translation:{selectAll:"Select all",deselectAll:"Deselect all",search:"Search"}},e||{}),this.data=e.data||[],["items","shown","count"].forEach((t=>{this[t]={left:[],right:[]}})),this.searching={left:null,right:null},this.items.left=this.data,this.config.selected&&this.preSelect(),this.create()}create(){this.el.innerHTML='\n<div class="selectit">\n\t<div class="selectit-left">\n\t\t<div class="selectit-search">\n\t\t\t<span class="close left">✕</span>\n\t\t\t<input type="search" placeholder="Search"/>\n\t\t</div>\n\t\t<div class="selectit-container">\n\t\t\t<ul class="selectit-list"></ul>\n\t\t\t<div class="selectit-counter">\n\t\t\t\t<span class="selectit-selectall">Select all</span>\n\t\t\t\t<span class="selectit-count">x</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="selectit-center">\n\t\t‹ ›\n\t</div>\n\t<div class="selectit-right">\n\t\t<div class="selectit-search">\n\t\t\t<span class="close right">✕</span>\n\t\t\t<input type="search" placeholder="Search"/>\n\t\t</div>\n\t\t<div class="selectit-container">\n\t\t\t<ul class="selectit-list"></ul>\n\t\t\t<div class="selectit-counter">\n\t\t\t\t<span class="selectit-deselect">Deselect all</span>\n\t\t\t\t<span class="selectit-count">x</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<input type="hidden" class="selectit-input" name="selectit-input" />\n</div>\n',this.elements=new i(this.el).elements,this.elements.container.style.height=`${this.config.height}px`,this.elements.hidden.setAttribute("name",this.config.name),this.elements.select.innerHTML=this.config.translation.selectAll,this.elements.deselect.innerHTML=this.config.translation.deselectAll,this.elements.input.left.setAttribute("placeholder",this.config.translation.search),this.elements.input.right.setAttribute("placeholder",this.config.translation.search),this.registerEvents(),this.render()}registerEvents(){this.elements.select.addEventListener("click",(()=>this.selectAll())),this.elements.deselect.addEventListener("click",(()=>this.deselectAll())),this.elements.input.left.addEventListener("keyup",(t=>this.searchItems(t,"left"))),this.elements.input.right.addEventListener("keyup",(t=>this.searchItems(t,"right"))),this.elements.close.left.addEventListener("click",(()=>this.clearSearch("left"))),this.elements.close.right.addEventListener("click",(()=>this.clearSearch("right")))}clearSearch(t){this.searching[t]=!1,this.shown[t]=[],this.elements.input[t].value="",this.elements.close[t].style.visibility="hidden",this.render()}searchItems(t,e){this.searching[e]=t.target.value,(this.searching[e]||""===this.searching[e])&&(this.shown[e]=[],this.elements.close[e].style.visibility="hidden"),this.shown[e]=this.items[e].filter((t=>-1!==t[this.config.labelField].toLowerCase().indexOf(this.searching[e].toLowerCase()))),this.searching[e]?this.elements.close[e].style.visibility="visible":this.shown[e]=[],this.render()}selectAll(){this.items.left=[],this.items.right=this.data,this.render()}deselectAll(){this.items.left=this.data,this.items.right=[],this.render()}render(){s.forEach((t=>{this.elements.counter[t].innerHTML=this.items[t].length,this.elements.list[t].innerHTML="",this[this.searching[t]?"shown":"items"][t].forEach((e=>{this.elements.list[t].appendChild(this.renderListItem(e,t))}))})),this.emit("selected",this.items.right),this.elements.hidden.value=this.items.right.map((t=>t[this.config.valueField]))}get selected(){return this.items.right}renderListItem(t,e){let s=document.createElement("li");return s.setAttribute("data-value",t.value),s.setAttribute("data-side",e),s.innerHTML=t[this.config.labelField],s.addEventListener("click",this.listItemClicked.bind(this,t)),s}listItemClicked(t,e){switch(e.target.getAttribute("data-side")){case"left":this.move(t,"left","right");break;case"right":this.move(t,"right","left")}this.render()}setSearchList(){s.forEach((t=>{this.searching[t]&&(this.shown[t]=this.items[t].filter((e=>-1!==e[this.config.labelField].toLowerCase().indexOf(this.searching[t].toLowerCase()))))}))}move(t,e,s){this.items[s].push(t),this.items[e]=this.items[e].filter((e=>t!==e)),this.setSearchList()}preSelect(){this.items.right=this.data.filter((t=>-1!==this.config.selected.indexOf(t[this.config.valueField]))),this.items.left=this.data.filter((t=>-1===this.config.selected.indexOf(t[this.config.valueField])))}};window.SelectIt=e.default})();